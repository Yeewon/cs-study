## í•¨ìˆ˜ì˜ êµ¬ë¶„

`ES6 ì´ì „`

1. **callable** ì´ë©° **constructor** ì´ë‹¤.
2. ëª¨ë“  í•¨ìˆ˜ëŠ” ì‚¬ìš© ëª©ì ì— ë”°ë¼ ëª…í™•í•œ êµ¬ë¶„ì´ ì—†ìœ¼ë¯€ë¡œ í˜¸ì¶œ ë°©ì‹ì— íŠ¹ë³„í•œ ì œì•½ì´ ì—†ê³  ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ì§€ ì•Šì•„ë„ í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

`ES6 ì´í›„`

1. ì¼ë°˜ í•¨ìˆ˜ëŠ” **constructor** ì´ë‹¤.
2. ë©”ì„œë“œì™€ í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” **non-constructor** ì´ë‹¤.

> **callable** : í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ ê°ì²´
> **constructor** : ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ ê°ì²´

## ë©”ì„œë“œ

`ES6`

- ë©”ì„œë“œëŠ” ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„ìœ¼ë¡œ ì •ì˜ëœ í•¨ìˆ˜ë§Œì„ ì˜ë¯¸í•œë‹¤.
- ìì‹ ì„ë°”ì¸ë”©í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ `[[HomeObject]]` ë¥¼ ê°–ëŠ”ë‹¤.
- super í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
const obj = {
  x: 1,
  // ë©”ì„œë“œ
  foo() {
    return this.x;
  },
  // ì¼ë°˜ í•¨ìˆ˜
  bar: function () {
    return this.x;
  },
};

// ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ëŠ” non-constructorë‹¤.
new obj.foo(); // TypeError : obj.foo is not a contructor
new obj.bar(); // bar{}
```

## í™”ì‚´í‘œ í•¨ìˆ˜

- í‘œí˜„ê³¼ ë‚´ë¶€ë™ì‘ì´ ê¸°ì¡´ í•¨ìˆ˜ë³´ë‹¤ ê°„ëµí•˜ë‹¤.
- ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ëŠ” `non-constructor` ë‹¤.
- í•˜ë‚˜ì˜ ë¬¸ìœ¼ë¡œ êµ¬ì„±ëœë‹¤ë©´ ì¤‘ê´„í˜¸ ìƒëµì´ ê°€ëŠ¥í•˜ë‹¤. ì´ë•Œ ë‚´ë¶€ì˜ ë¬¸ì´ ê°’ìœ¼ë¡œ í‰ê°€ë  ìˆ˜ ìˆëŠ” í‘œí˜„ì‹ì¸ ë¬¸ì´ë¼ë©´ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.
  ```jsx
  const power = (x) => x ** 2;
  power(2); // 4
  ```
- ê°ì²´ ë¦¬í„°ëŸ´ì„ ë°˜í™˜í•˜ëŠ” ê²½ìš° ì†Œê´„í˜¸ë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•œë‹¤.
  ```jsx
  const create = (id, content) => ({ id, content });
  ```
- ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  ```jsx
  const Person = ((name) => ({
    sayHi() {
      return `Hi? My name is ${name}`;
    },
  }))("Lee");
  ```
- í™”ì‚´í‘œ í•¨ìˆ˜ë„ ì¼ê¸‰ ê°ì²´ì´ë¯€ë¡œ `Array.prototype.map`, `Array.prototype.filter`, `Array.prototype.reduce` ê°™ì€ ê³ ì°¨ í•¨ìˆ˜ì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
- ì¤‘ë³µëœ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì„ ì„ ì–¸í•  ìˆ˜ ì—†ë‹¤.
- í•¨ìˆ˜ ìì²´ì˜ `this`, `arguments`, `super`, `new.target` ë°”ì¸ë”©ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤.
  ë”°ë¼ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì°¸ì¡°í•˜ë©´ ìƒìœ„ ìŠ¤ì½”í”„ì˜ `this`, `arguments`, `super`, `new.target` ì„ ì°¸ì¡°í•œë‹¤.

## this

### ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ this ë¬¸ì œ

```jsx
class Prefixer {
  constructor(prefix) {
    this.prefix = prefix;
  }

  add(arr) {
    // add ë©”ì„œë“œëŠ” ì¸ìˆ˜ë¡œ ì „ë‹¬ëœ ë°°ì—´ arrì„ ìˆœíšŒí•˜ë©° ë°°ì—´ì˜ ëª¨ë“  ìš”ì†Œì— prefixë¥¼ ì¶”ê°€í•œë‹¤.
    return arr.map(function (item) {
      // ëª¨ë“  í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
      return this.prefix + item; // TypeError: Cannot read property 'prefix' of undefined
    });
  }
}
```

### ë¬¸ì œ í•´ê²°

1. prefixer ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” thisë¥¼ ì¼ë‹¨ íšŒí”¼ì‹œí‚¨ í›„ì— ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•œë‹¤.

   ```jsx
   ...
     add(arr) {
   		// thisë¥¼ ì¼ë‹¨ íšŒí”¼í•œë‹¤.
   		const that = this;
       return arr.map(function (item) {
         // this ëŒ€ì‹  thatì„ ì°¸ì¡°í•œë‹¤.
         return that.prefix + item;
       });
     }

   ```

2. ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ add ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ prefixer ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” thisë¥¼ ì „ë‹¬í•œë‹¤.

   ```jsx
   ...
     add(arr) {
       return arr.map(function (item) {
         return this.prefix + item;
       },this);
     }

   ```

3. `Function.prototype.bind` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ add ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ prefixer ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” thisë¥¼ ë°”ì¸ë”©í•œë‹¤.

   ```jsx
   ...
     add(arr) {
       return arr.map(function (item) {
         return this.prefix + item;
       }.bind(this));
     }

   ```

4. **í™”ì‚´í‘œ í•¨ìˆ˜ ì‚¬ìš©**

   - ìì²´ì˜ this ë°”ì¸ë”©ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤.
   - ë”°ë¼ì„œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisë¥¼ ì°¸ì¡°í•˜ë©´ ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê·¸ëŒ€ë¡œ ì°¸ì¡°í•œë‹¤. ğŸ‘‰ `Lexical this`
     ```jsx
     class Prefixer {
       constructor(prefix) {
         this.prefix = prefix;
       }

       add(arr) {
         return arr.map((item) => this.prefix + item);
       }
     }
     ```
   - í”„ë¡œí¼í‹°ì— í• ë‹¹í•œ í™”ì‚´í‘œ í•¨ìˆ˜ë„ ìŠ¤ì½”í”„ ì²´ì¸ ìƒì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ìƒìœ„ í•¨ìˆ˜ ì¤‘ì—ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ê°€ ì•„ë‹Œ í•¨ìˆ˜ì˜ thisë¥¼ ì°¸ì¡°í•œë‹¤.
   - ë©”ì„œë“œë¥¼ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ëŠ” ê²ƒì€ í”¼í•´ì•¼ í•œë‹¤.
   - í”„ë¡œí¼í‹°ë¥¼ ë™ì  ì¶”ê°€í•  ë•ŒëŠ” ì¼ë°˜ í•¨ìˆ˜ë¥¼ í• ë‹¹í•œë‹¤.
     ```jsx
     function Person(name) {
       this.name = name;
     }

     Person.prototype.sayHi = () => console.log(`Hi${this.name}`);
     //this.name = window.name

     Person.prototype.sayHi = function () {
       console.log(`Hi${this.name}`);
     };
     //this.name = Lee

     const person = new Person("Lee");
     person.sayHi();
     ```
   - í•¨ìˆ˜ ìì²´ì˜ super ë°”ì¸ë”©ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤.
   - í•¨ìˆ˜ ìì²´ì˜ arguments ë°”ì¸ë”©ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤.

   ## Rest íŒŒë¼ë¯¸í„°

   í•¨ìˆ˜ì— ì „ë‹¬ëœ ì¸ìˆ˜ë“¤ì˜ ëª©ë¡ì„ ë°°ì—´ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

   - ë°˜ë“œì‹œ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ì´ì–´ì•¼ í•œë‹¤.
   - í•¨ìˆ˜ ê°ì²´ì˜ length í”„ë¡œí¼í‹°ì—ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

   ```jsx
   function bar(param1, param2, ...rest) {
     console.log(param1); // 1
     console.log(param2); // 2
     console.log(rest); // [3, 4, 5]
   }

   bar(1, 2, 3, 4, 5);
   console.log(bar.length); // 2
   ```

   ## ë§¤ê°œë³€ìˆ˜ ê¸°ë³¸ê°’

   - ì¸ìˆ˜ê°€ ì „ë‹¬ë˜ì§€ ì•Šì€ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì€ `undefined`ë‹¤.
   - ES6ì—ì„œ ë„ì…ëœ ë§¤ê°œë³€ìˆ˜ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ë©´ ì´ˆê¸°í™”ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆë‹¤.
   - Rest íŒŒë¼ë¯¸í„°ì—ëŠ” ê¸°ë³¸ê°’ì„ ì§€ì •í•  ìˆ˜ ì—†ë‹¤.

   ```jsx
   function sum(x = 0, y = 0) {
     return x + y;
   }

   console.log(sum(1, 2));
   console.log(sum(1));
   ```
